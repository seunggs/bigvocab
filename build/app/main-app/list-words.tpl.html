<div class="container">
	<div class="clearfix">

		<h1 class="mt1 mb3 center">List of All Words<span ng-if="listWords.collectionTitle"> in <span class="italic">{{ listWords.collectionTitle }}</span></span></h1>

		<!-- search words form -->
		<div class="sm-col-6 mx-auto px2">
			
			<form name="listWords.listWordsForm" class="center">
				<input name="searchWords" type="text" ng-model="listWords.formData.searchWords" class="field col-12 mb3" placeholder="Search any word or definition">
			</form>

		</div>
		<!-- end: search words form -->

		<!-- list of words -->
		<div class="sm-col-10 mx-auto px2">
			
			<div ng-repeat="word in listWords.words | filter: listWords.formData.searchWords | orderBy: 'word' | limitTo: listWords.displayLimit" class="clearfix col-12 mb2" ng-class="{ 'rounded bg-lighten-3 p2 mb3': listWords.showEdit[word.id] }" track by word.id>
				<form name="listWordsForm" ng-submit="listWords.saveChanges(listWords.listWordsForm.$valid, word, listWords.formData)">

					<!-- word -->
					<div class="sm-col sm-col-3 flex flex-center">

						<a ng-click="listWords.toggleEdit(word)" ng-if="!listWords.showEdit[word.id]">{{ word.word }}</a>
						<a ng-if="listWords.showEdit[word.id]" class="ti-close red mr1" ng-click="listWords.toggleEdit(word)"></a>
						<input name="word" 
									 type="text" 
									 ng-model="listWords.formData.word" 
									 ng-if="listWords.showEdit[word.id]" 
									 class="field flex-auto mr1" 
									 placeholder="{{ listWords.placeholder.word }}" 
									 autofocus required>
	
						<!-- error handling -->
						<div ng-messages="listWords.listWordsForm.word.$error" 
								 ng-if="listWords.listWordsForm.$submitted && listWords.listWordsForm.word.$touched" 
								 class="red bold h6 mt1">
							<div ng-message="required"><span class="ti-alert mr1"></span>This field is required</div>
						</div>
						<!-- end: error handling -->

					</div>
					<!-- word -->

					<!-- definition -->
					<div class="sm-col sm-col-9 dark-gray flex flex-start flex-wrap">
						<span ng-if="!listWords.showEdit[word.id]">{{ word.definition }}</span>
						<textarea name="definition" 
											ng-model="listWords.formData.definition" 
											ng-if="listWords.showEdit[word.id]" 
											class="field flex-auto" 
											style="height: 96px;" 
											placeholder="{{ listWords.placeholder.definition }}">
						</textarea>
						<button type="submit" 
										ng-if="listWords.showEdit[word.id]" 
										ng-disabled="listWords.btnState.success || listWords.btnState.loading"
										class="btn btn-form btn-primary sm-col-4 ml1">
							<span ng-if="!listWords.btnState.loading && !listWords.btnState.success">Save Changes</span>
							<span ng-if="listWords.btnState.loading"><spinner width="16px"></spinner>Please wait...</span>
							<span ng-if="listWords.btnState.success"><span class="ti-check mr1"></span>Success!</span>
						</button>
					</div>
					<!-- end: definition -->

				</form>
			</div>
			
		</div>
		<!-- end: list of words -->

	</div>
</div>

<!-- notification -->
<notification color="green" show="listWords.notification.success"><span class="ti-check mr1"></span>{{ listWords.notificationSuccessMsg }}</notification>
<notification color="red" show="listWords.notification.error"><span class="ti-alert mr1"></span>{{ listWords.notificationErrorMsg }}</notification>
<!-- end: notification -->

